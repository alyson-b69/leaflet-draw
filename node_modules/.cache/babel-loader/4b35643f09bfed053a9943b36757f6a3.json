{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport { useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet-control-geocoder/dist/Control.Geocoder.css\";\nimport \"leaflet-control-geocoder/dist/Control.Geocoder.js\";\nimport icon from \"../utils/constants\";\n\nvar LeafletControlGeocoder = function LeafletControlGeocoder() {\n  _s();\n\n  var map = useMap();\n  useEffect(function () {\n    var geocoder = L.Control.Geocoder.nominatim();\n\n    if (typeof URLSearchParams !== \"undefined\" && location.search) {\n      // parse /?geocoder=nominatim from URL\n      var params = new URLSearchParams(location.search);\n      var geocoderString = params.get(\"geocoder\");\n\n      if (geocoderString && L.Control.Geocoder[geocoderString]) {\n        geocoder = L.Control.Geocoder[geocoderString]();\n      } else if (geocoderString) {\n        console.warn(\"Unsupported geocoder\", geocoderString);\n      }\n    }\n\n    L.Control.geocoder({\n      query: \"\",\n      placeholder: \"Search here...\",\n      defaultMarkGeocode: false,\n      geocoder: geocoder\n    }).on(\"markgeocode\", function (e) {\n      var _e$geocode, _e$geocode$properties;\n\n      console.log(e.geocode);\n      var latlng = e.geocode.center;\n      var boundingBox = (_e$geocode = e.geocode) === null || _e$geocode === void 0 ? void 0 : (_e$geocode$properties = _e$geocode.properties) === null || _e$geocode$properties === void 0 ? void 0 : _e$geocode$properties.boundingbox;\n      console.log(boundingBox);\n      L.polyline(boundingBox).addTo(map);\n      L.marker(latlng, {\n        icon: icon\n      }).addTo(map).bindPopup(e.geocode.name).openPopup();\n      map.fitBounds(e.geocode.bbox);\n    }).addTo(map);\n  }, []);\n  return null;\n};\n\n_s(LeafletControlGeocoder, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n\n_c = LeafletControlGeocoder;\nexport default LeafletControlGeocoder;\n\nvar _c;\n\n$RefreshReg$(_c, \"LeafletControlGeocoder\");","map":{"version":3,"names":["useEffect","useMap","L","icon","LeafletControlGeocoder","map","geocoder","Control","Geocoder","nominatim","URLSearchParams","location","search","params","geocoderString","get","console","warn","query","placeholder","defaultMarkGeocode","on","e","log","geocode","latlng","center","boundingBox","properties","boundingbox","polyline","addTo","marker","bindPopup","name","openPopup","fitBounds","bbox"],"sources":["/Users/alyson/codelab/leaflet-draw/src/components/LeafletControlGeocoder.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useMap } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet-control-geocoder/dist/Control.Geocoder.css\";\r\nimport \"leaflet-control-geocoder/dist/Control.Geocoder.js\";\r\nimport icon from \"../utils/constants\";\r\n\r\nconst LeafletControlGeocoder = () => {\r\n  const map = useMap();\r\n\r\n  useEffect(() => {\r\n    var geocoder = L.Control.Geocoder.nominatim();\r\n    if (typeof URLSearchParams !== \"undefined\" && location.search) {\r\n      // parse /?geocoder=nominatim from URL\r\n\r\n      var params = new URLSearchParams(location.search);\r\n      var geocoderString = params.get(\"geocoder\");\r\n      if (geocoderString && L.Control.Geocoder[geocoderString]) {\r\n        geocoder = L.Control.Geocoder[geocoderString]();\r\n      } else if (geocoderString) {\r\n        console.warn(\"Unsupported geocoder\", geocoderString);\r\n      }\r\n    }\r\n\r\n    L.Control.geocoder({\r\n      query: \"\",\r\n      placeholder: \"Search here...\",\r\n      defaultMarkGeocode: false,\r\n      geocoder\r\n    })\r\n      .on(\"markgeocode\", function (e) {\r\n        console.log(e.geocode)\r\n        var latlng = e.geocode.center;\r\n        const boundingBox = e.geocode?.properties?.boundingbox;\r\n        console.log(boundingBox)\r\n        L.polyline(boundingBox).addTo(map);\r\n        L.marker(latlng, { icon })\r\n          .addTo(map)\r\n          .bindPopup(e.geocode.name)\r\n          .openPopup();\r\n        map.fitBounds(e.geocode.bbox);\r\n      })\r\n      .addTo(map);\r\n  }, []);\r\n\r\n  return null;\r\n};\r\n\r\nexport default LeafletControlGeocoder;\r\n"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,OAAOC,CAAP,MAAc,SAAd;AACA,OAAO,oDAAP;AACA,OAAO,mDAAP;AACA,OAAOC,IAAP,MAAiB,oBAAjB;;AAEA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;EAAA;;EACnC,IAAMC,GAAG,GAAGJ,MAAM,EAAlB;EAEAD,SAAS,CAAC,YAAM;IACd,IAAIM,QAAQ,GAAGJ,CAAC,CAACK,OAAF,CAAUC,QAAV,CAAmBC,SAAnB,EAAf;;IACA,IAAI,OAAOC,eAAP,KAA2B,WAA3B,IAA0CC,QAAQ,CAACC,MAAvD,EAA+D;MAC7D;MAEA,IAAIC,MAAM,GAAG,IAAIH,eAAJ,CAAoBC,QAAQ,CAACC,MAA7B,CAAb;MACA,IAAIE,cAAc,GAAGD,MAAM,CAACE,GAAP,CAAW,UAAX,CAArB;;MACA,IAAID,cAAc,IAAIZ,CAAC,CAACK,OAAF,CAAUC,QAAV,CAAmBM,cAAnB,CAAtB,EAA0D;QACxDR,QAAQ,GAAGJ,CAAC,CAACK,OAAF,CAAUC,QAAV,CAAmBM,cAAnB,GAAX;MACD,CAFD,MAEO,IAAIA,cAAJ,EAAoB;QACzBE,OAAO,CAACC,IAAR,CAAa,sBAAb,EAAqCH,cAArC;MACD;IACF;;IAEDZ,CAAC,CAACK,OAAF,CAAUD,QAAV,CAAmB;MACjBY,KAAK,EAAE,EADU;MAEjBC,WAAW,EAAE,gBAFI;MAGjBC,kBAAkB,EAAE,KAHH;MAIjBd,QAAQ,EAARA;IAJiB,CAAnB,EAMGe,EANH,CAMM,aANN,EAMqB,UAAUC,CAAV,EAAa;MAAA;;MAC9BN,OAAO,CAACO,GAAR,CAAYD,CAAC,CAACE,OAAd;MACA,IAAIC,MAAM,GAAGH,CAAC,CAACE,OAAF,CAAUE,MAAvB;MACA,IAAMC,WAAW,iBAAGL,CAAC,CAACE,OAAL,wEAAG,WAAWI,UAAd,0DAAG,sBAAuBC,WAA3C;MACAb,OAAO,CAACO,GAAR,CAAYI,WAAZ;MACAzB,CAAC,CAAC4B,QAAF,CAAWH,WAAX,EAAwBI,KAAxB,CAA8B1B,GAA9B;MACAH,CAAC,CAAC8B,MAAF,CAASP,MAAT,EAAiB;QAAEtB,IAAI,EAAJA;MAAF,CAAjB,EACG4B,KADH,CACS1B,GADT,EAEG4B,SAFH,CAEaX,CAAC,CAACE,OAAF,CAAUU,IAFvB,EAGGC,SAHH;MAIA9B,GAAG,CAAC+B,SAAJ,CAAcd,CAAC,CAACE,OAAF,CAAUa,IAAxB;IACD,CAjBH,EAkBGN,KAlBH,CAkBS1B,GAlBT;EAmBD,CAjCQ,EAiCN,EAjCM,CAAT;EAmCA,OAAO,IAAP;AACD,CAvCD;;GAAMD,sB;UACQH,M;;;KADRG,sB;AAyCN,eAAeA,sBAAf"},"metadata":{},"sourceType":"module"}