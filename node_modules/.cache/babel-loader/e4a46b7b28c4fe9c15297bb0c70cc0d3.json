{"ast":null,"code":"import _asyncToGenerator from \"/Users/alyson/codelab/leaflet-draw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/alyson/codelab/leaflet-draw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/alyson/codelab/leaflet-draw/src/components/DisplayPosition.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/alyson/codelab/leaflet-draw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Address = function Address(_ref) {\n  _s();\n\n  var map = _ref.map,\n      position = _ref.position;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      address = _useState2[0],\n      setAddress = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var fetchAddress = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(lat, lon) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              axios(\"https://nominatim.openstreetmap.org/reverse\", {\n                params: {\n                  format: \"jsonv2\",\n                  lat: lat,\n                  lon: lon\n                }\n              }).then(function (res) {\n                setAddress(res.data);\n              }).catch(console.error);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchAddress(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onMoveEnd = useCallback(function () {\n    fetchAddress(position.lat, position.lng);\n  }, [position.lat, position.lng]);\n  useEffect(function () {\n    map.on(\"moveend\", onMoveEnd);\n    return function () {\n      map.off(\"moveend\", onMoveEnd);\n    };\n  }, [map, onMoveEnd]);\n  return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Address: \", address ? address.display_name : \"Unavailable\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 10\n  }, _this);\n};\n\n_s(Address, \"LByMBq8qyxVDKm2HTgd7FPVktBw=\");\n\n_c = Address;\n\nvar DisplayPosition = function DisplayPosition(_ref3) {\n  _s2();\n\n  var map = _ref3.map,\n      center = _ref3.center,\n      zoom = _ref3.zoom;\n\n  var _useState5 = useState(map.getCenter()),\n      _useState6 = _slicedToArray(_useState5, 2),\n      position = _useState6[0],\n      setPosition = _useState6[1];\n\n  var onClick = useCallback(function () {\n    map.setView(center, zoom);\n  }, [map, center, zoom]);\n  var onMove = useCallback(function () {\n    setPosition(map.getCenter());\n  }, [map]);\n  useEffect(function () {\n    map.on(\"move\", onMove);\n    return function () {\n      map.off(\"move\", onMove);\n    };\n  }, [map, onMove]);\n\n  var handleSearch = function handleSearch(e) {\n    axios.get('https://nominatim.openstreetmap.org/search?q=italie&limit=5&format=json&addressdetails=1', {\n      params: {\n        country: e.target.value,\n        format: 'json',\n        limit: 5,\n        addressdetails: 1\n      }\n    }).then(function (result) {\n      console.log(result);\n      return result;\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Actual center\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: 'text',\n      value: 'italie',\n      onChange: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"latitude: \", position.lat.toFixed(4), \", longitude:\", \" \", position.lng.toFixed(4), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Address, {\n      map: map,\n      position: position\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClick,\n        children: \"reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, _this);\n};\n\n_s2(DisplayPosition, \"Cdy6UQRFgFKCMT1j7tK9kPr24m0=\");\n\n_c2 = DisplayPosition;\nexport default DisplayPosition;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Address\");\n$RefreshReg$(_c2, \"DisplayPosition\");","map":{"version":3,"names":["useCallback","useState","useEffect","axios","Address","map","position","address","setAddress","search","setSearch","fetchAddress","lat","lon","params","format","then","res","data","catch","console","error","onMoveEnd","lng","on","off","display_name","DisplayPosition","center","zoom","getCenter","setPosition","onClick","setView","onMove","handleSearch","e","get","country","target","value","limit","addressdetails","result","log","toFixed"],"sources":["/Users/alyson/codelab/leaflet-draw/src/components/DisplayPosition.js"],"sourcesContent":["import { useCallback, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Address = ({ map, position }) => {\r\n  const [address, setAddress] = useState(null);\r\n  const [search, setSearch] = useState('');\r\n  const fetchAddress = async (lat, lon) => {\r\n    axios(\"https://nominatim.openstreetmap.org/reverse\", {\r\n      params: {\r\n        format: \"jsonv2\",\r\n        lat: lat,\r\n        lon: lon\r\n      }\r\n    })\r\n      .then((res) => {\r\n        setAddress(res.data);\r\n      })\r\n      .catch(console.error);\r\n  };\r\n\r\n  const onMoveEnd = useCallback(() => {\r\n    fetchAddress(position.lat, position.lng);\r\n  }, [position.lat, position.lng]);\r\n\r\n  useEffect(() => {\r\n    map.on(\"moveend\", onMoveEnd);\r\n    return () => {\r\n      map.off(\"moveend\", onMoveEnd);\r\n    };\r\n  }, [map, onMoveEnd]);\r\n\r\n  return <p>Address: {address ? address.display_name : \"Unavailable\"}</p>;\r\n};\r\n\r\nconst DisplayPosition = ({ map, center, zoom }) => {\r\n  const [position, setPosition] = useState(map.getCenter());\r\n\r\n  const onClick = useCallback(() => {\r\n    map.setView(center, zoom);\r\n  }, [map, center, zoom]);\r\n\r\n  const onMove = useCallback(() => {\r\n    setPosition(map.getCenter());\r\n  }, [map]);\r\n\r\n  useEffect(() => {\r\n    map.on(\"move\", onMove);\r\n    return () => {\r\n      map.off(\"move\", onMove);\r\n    };\r\n  }, [map, onMove]);\r\n\r\n\r\n  const handleSearch = (e) => {\r\n    axios.get('https://nominatim.openstreetmap.org/search?q=italie&limit=5&format=json&addressdetails=1', {\r\n      params: {\r\n        country: e.target.value,\r\n        format: 'json',\r\n        limit: 5,\r\n        addressdetails: 1\r\n      }\r\n    }).then((result) => {\r\n      console.log(result)\r\n      return result;\r\n    }).catch(error => console.log(error))\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h3>Actual center</h3>\r\n      <input type={'text'} value={'italie'} onChange={handleSearch} />\r\n      <p>\r\n        latitude: {position.lat.toFixed(4)}, longitude:{\" \"}\r\n        {position.lng.toFixed(4)}{\" \"}\r\n      </p>\r\n      <Address map={map} position={position} />\r\n      <p>\r\n        <button onClick={onClick}>reset</button>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayPosition;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}