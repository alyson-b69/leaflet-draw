{"ast":null,"code":"import _asyncToGenerator from \"/Users/alyson/codelab/leaflet-draw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/alyson/codelab/leaflet-draw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/alyson/codelab/leaflet-draw/src/components/DisplayPosition.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/alyson/codelab/leaflet-draw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Address = function Address(_ref) {\n  _s();\n\n  var map = _ref.map,\n      position = _ref.position;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      address = _useState2[0],\n      setAddress = _useState2[1];\n\n  var fetchAddress = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(lat, lon) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              axios(\"https://nominatim.openstreetmap.org/reverse\", {\n                params: {\n                  format: \"jsonv2\",\n                  lat: lat,\n                  lon: lon\n                }\n              }).then(function (res) {\n                setAddress(res.data);\n              }).catch(console.error);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchAddress(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onMoveEnd = useCallback(function () {\n    fetchAddress(position.lat, position.lng);\n  }, [position.lat, position.lng]);\n  useEffect(function () {\n    map.on(\"moveend\", onMoveEnd);\n    return function () {\n      map.off(\"moveend\", onMoveEnd);\n    };\n  }, [map, onMoveEnd]);\n  return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Address: \", address ? address.display_name : \"Unavailable\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 10\n  }, _this);\n};\n\n_s(Address, \"kSmrbxchRjmT41VYgPHVYcHbDeA=\");\n\n_c = Address;\n\nvar DisplayPosition = function DisplayPosition(_ref3) {\n  _s2();\n\n  var map = _ref3.map,\n      center = _ref3.center,\n      zoom = _ref3.zoom;\n\n  var _useState3 = useState(map.getCenter()),\n      _useState4 = _slicedToArray(_useState3, 2),\n      position = _useState4[0],\n      setPosition = _useState4[1];\n\n  var onClick = useCallback(function () {\n    map.setView(center, zoom);\n  }, [map, center, zoom]);\n  var onMove = useCallback(function () {\n    setPosition(map.getCenter());\n  }, [map]);\n  useEffect(function () {\n    map.on(\"move\", onMove);\n    return function () {\n      map.off(\"move\", onMove);\n    };\n  }, [map, onMove]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Actual center\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"latitude: \", position.lat.toFixed(4), \", longitude:\", \" \", position.lng.toFixed(4), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Address, {\n      map: map,\n      position: position\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClick,\n        children: \"reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick() {\n          console.log(map);\n        },\n        children: \"Show selected polygons\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, _this);\n};\n\n_s2(DisplayPosition, \"Cdy6UQRFgFKCMT1j7tK9kPr24m0=\");\n\n_c2 = DisplayPosition;\nexport default DisplayPosition;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Address\");\n$RefreshReg$(_c2, \"DisplayPosition\");","map":{"version":3,"names":["useCallback","useState","useEffect","axios","Address","map","position","address","setAddress","fetchAddress","lat","lon","params","format","then","res","data","catch","console","error","onMoveEnd","lng","on","off","display_name","DisplayPosition","center","zoom","getCenter","setPosition","onClick","setView","onMove","toFixed","log"],"sources":["/Users/alyson/codelab/leaflet-draw/src/components/DisplayPosition.js"],"sourcesContent":["import { useCallback, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Address = ({ map, position }) => {\r\n  const [address, setAddress] = useState(null);\r\n  const fetchAddress = async (lat, lon) => {\r\n    axios(\"https://nominatim.openstreetmap.org/reverse\", {\r\n      params: {\r\n        format: \"jsonv2\",\r\n        lat: lat,\r\n        lon: lon\r\n      }\r\n    })\r\n      .then((res) => {\r\n        setAddress(res.data);\r\n      })\r\n      .catch(console.error);\r\n  };\r\n\r\n  const onMoveEnd = useCallback(() => {\r\n    fetchAddress(position.lat, position.lng);\r\n  }, [position.lat, position.lng]);\r\n\r\n  useEffect(() => {\r\n    map.on(\"moveend\", onMoveEnd);\r\n    return () => {\r\n      map.off(\"moveend\", onMoveEnd);\r\n    };\r\n  }, [map, onMoveEnd]);\r\n\r\n  return <p>Address: {address ? address.display_name : \"Unavailable\"}</p>;\r\n};\r\n\r\nconst DisplayPosition = ({ map, center, zoom }) => {\r\n  const [position, setPosition] = useState(map.getCenter());\r\n\r\n  const onClick = useCallback(() => {\r\n    map.setView(center, zoom);\r\n  }, [map, center, zoom]);\r\n\r\n  const onMove = useCallback(() => {\r\n    setPosition(map.getCenter());\r\n  }, [map]);\r\n\r\n  useEffect(() => {\r\n    map.on(\"move\", onMove);\r\n    return () => {\r\n      map.off(\"move\", onMove);\r\n    };\r\n  }, [map, onMove]);\r\n\r\n  return (\r\n    <div>\r\n      <h3>Actual center</h3>\r\n      <p>\r\n        latitude: {position.lat.toFixed(4)}, longitude:{\" \"}\r\n        {position.lng.toFixed(4)}{\" \"}\r\n      </p>\r\n      <Address map={map} position={position} />\r\n      <p>\r\n        <button onClick={onClick}>reset</button>\r\n        <button onClick={()=> {\r\n          console.log(map)\r\n        }}>Show selected polygons</button>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayPosition;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}